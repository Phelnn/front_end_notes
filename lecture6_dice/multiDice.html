<!DOCTYPE html>
<html>
    <head>
        <title>multiDice</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js" referrerpolicy="no-referrer"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.6/underscore-min.js" integrity="sha512-2V49R8ndaagCOnwmj8QnbT1Gz/rie17UouD9Re5WxbzRVUGoftCu5IuqqtAM9+UC3fwfHCSJR1hkzNQh/2wdtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script id="result" type="text/template">
            <li>
                You rolled:
                {{#each values}}
                    <img alt="{{this}}" title="{{this}}" src="{{this}}.png">
                {{/each}}
                (Total: {{total}})
            </li>
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                document.querySelector('#roll').onclick = () => {
                    const counter = parseInt(document.querySelector('#counter').value)  //将输入的字符串转换为数字
                    const rolls = []
                    let total = 0
                    for(let i = 0; i < counter; i++){
                        const value = Math.floor( Math.random() * 6) + 1
                        rolls.push(value)
                        total += value
                    }
                    var tpl = _.template($('#result').html())
                    const content = tpl({'values': rolls, 'total':total})
                    document.querySelector('#rolls').innerHTML += content
                }
            })
        </script>

    </head>
    <body>
        <input id="counter" type="number" placeholder="number of rolls" min="1">
        <button id="roll">roll</button>
        <ul id="rolls"></ul>
    </body>
</html>