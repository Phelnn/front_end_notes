<!DOCTYPE html>
<!--实现画板功能-->
<head>
    <title>draw</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.4/d3.min.js" integrity="sha512-nfUlp2ZWPKWlnAH/OsMeAqRSYBxOdPYeBXwceyw6QqqZ7uTT/s5/eS1hMKphjVBouk0jf/JQ8ULVJRnEqSHkXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>

<body>
    <svg id="svg" style="width: 100%; height: 800px"></svg>
</body>

<script>
    const svg = d3.select('#svg')
    let drawing = false
    
    function draw_point(){
        if (drawing === false) return

        //const coords = d3.mouse(this)   //d3.mouse已经被移除，没找到替代
        svg.append('circle')
            .attr('cx', this.clientX)
            .attr('cy', this.clientY)
            .attr('r', 5)
            .style('fill', 'black')
    }

    svg.on('mousedown', () => {
        drawing = true
    })

    svg.on('mouseoff', () => {
        drawing = false
    })

    svg.on('mousemove', draw_point)

</script>